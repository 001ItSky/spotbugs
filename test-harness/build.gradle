apply from: "$rootDir/gradle/checkstyle.gradle"
apply from: "$rootDir/gradle/javadoc.gradle"
apply from: "$rootDir/gradle/maven.gradle"

dependencies {
  compile 'junit:junit:4.12'
  compile project(':findbugs')
}

javadoc {
  options.with {
    tags = ['Test']
  }
}

task javadocJar(type: Jar) {
  classifier = 'javadoc'
  from javadoc
}

task sourcesJar(type: Jar) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

artifacts {
  archives jar, javadocJar, sourcesJar
}

uploadArchives {
  repositories {
    mavenDeployer {
      pom.project {
        licenses {
          // This project contains copied source files from SonarSource and find-sec-bugs,
          // which is licensed under LGPL 3.0, so we should use v3.0 instead of 2.1.
          license {
            name 'GNU LESSER GENERAL PUBLIC LICENSE, Version 3.0'
            url 'https://www.gnu.org/licenses/lgpl-3.0.en.html'
          }
        }
      }
    }
  }
}
